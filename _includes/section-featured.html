<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Featured Section with Slider</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Splide/3.6.4/splide.min.css">
  <style>
    /* Featured Section */
    .featured-section {
      margin-top: 96px;
    }

    .featured__info {
      width: calc(100% - 1rem);
    }

    .featured__head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 32px;
    }

    .featured__title {
      margin-right: 20px;
      margin-bottom: 0;
      font-size: 32px;
    }

    .slider-controls {
      display: flex;
      align-items: center;
    }

    .prev,
    .next {
      width: 32px;
      height: 32px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 0;
      font-size: 14px;
      line-height: 1;
      text-align: center;
      border: none;
      border-radius: 50%;
      outline: none;
      cursor: pointer;
      color: var(--heading-font-color);
      background-color: var(--background-alt-color);
    }

    .prev {
      margin-right: 8px;
    }

    .prev[disabled],
    .next[disabled] {
      opacity: 0.4;
    }

    .featured__slider__inner {
      margin-bottom: -32px;
    }

    .splide__track {
      overflow: visible;
    }

    .splide__list {
      margin: 0;
      padding: 0;
    }

    .splide__slide {
      padding: 0 8px; /* Adjusted padding to reduce spacing */
    }
  </style>
</head>
<body>

{% assign featured_posts = site.posts | where: "featured", true %}

{% if featured_posts.size > 0 and site.data.settings.featured.enable == true %}
<!-- begin featured section -->
<section class="section blog animate featured-section">
  <div class="container">
    <div class="section__info section__info__center">
      <div class="section__head">
        {% if site.data.settings.featured.featured_intro %}
        <span class="section__intro">{{ site.data.settings.featured.featured_intro }}</span>
        {% endif %}
        {% if site.data.settings.featured.featured_title %}
        <h2 class="section__title">{{ site.data.settings.featured.featured_title }}</h2>
        {% endif %}
      </div>
    </div>

    <div class="splide featured__slider__inner">
      <div class="splide__track">
        <ul class="splide__list">
          {% assign sorted_featured_posts = featured_posts | sort: 'date' | reverse %}
          {% for post in sorted_featured_posts limit:3 %}
          <li class="splide__slide">
            {% include article.html %}
          </li>
          {% endfor %}
        </ul>
      </div>

      <div class="slider-controls">
        <button class="prev" aria-label="Previous slide">&lt;</button>
        <button class="next" aria-label="Next slide">&gt;</button>
      </div>
    </div>
  </div>
</section>
<!-- end featured section -->
{% endif %}

<!-- Include Splide JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Splide/3.6.4/splide.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var testimonialsSlider = document.querySelector('.splide.featured__slider__inner');
    if (testimonialsSlider) {
      var splide = new Splide(testimonialsSlider, {
        perPage: 5,
        perMove: 1,
        gap: 0, // Adjusted gap to reduce spacing
        arrows: false,
        drag: false,
        pagination: false,
        type: 'loop',
        autoScroll: {
          autoStart: true,
          speed: 0.8,
          pauseOnHover: false,
          pauseOnFocus: false
        },
        breakpoints: {
          1024: {
            perPage: 2,
            gap: 12 // Adjusted gap for smaller screens
          },
          768: {
            perPage: 1,
            gap: 8 // Adjusted gap for smaller screens
          }
        }
      }).mount(window.splide.Extensions);

      // Custom navigation buttons
      document.querySelector('.prev').addEventListener('click', function () {
        splide.go('<');
      });
      document.querySelector('.next').addEventListener('click', function () {
        splide.go('>');
      });
    }
  });
</script>
</body>
</html>
