{% assign featured_posts = site.posts | where: "featured", true %}

{% if featured_posts.size > 0 and site.data.settings.featured.enable == true %}
<!-- begin featured section -->
<style>
  /* Custom CSS for the exclusive slider */

  .custom-splide .splide__track {
    overflow: hidden;
  }

  .custom-splide .splide__slide {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 20px; /* Add spacing between the articles */
  }

  .custom-splide .splide__slide .article-container {
    flex: 1;
    margin: 0;
    box-sizing: border-box;
  }

  .custom-splide .splide__arrows button {
    background-color: #000;
    color: #fff;
    border: none;
    padding: 10px;
    cursor: pointer;
  }

  .custom-splide .splide__pagination {
    margin-top: 10px;
  }

  .custom-splide .splide__pagination__page.is-active {
    background-color: #333;
  }
</style>

<section class="section blog animate">
  <div class="container">

    <div class="section__info section__info__center">
      <div class="section__head">
        {% if site.data.settings.featured.featured_intro %}
        <span class="section__intro">{{ site.data.settings.featured.featured_intro }}</span>
        {% endif %}
        {% if site.data.settings.featured.featured_title %}
        <h2 class="section__title">{{ site.data.settings.featured.featured_title }}</h2>
        {% endif %}
      </div>
    </div>

    <div class="row">
      <div id="custom-splide" class="splide custom-splide">
        <div class="splide__track">
          <ul class="splide__list">
            {% assign sorted_featured_posts = featured_posts | sort: 'date' | reverse %}
            {% for post in sorted_featured_posts %}
              <li class="splide__slide">
                <div class="article-container">
                  <div class="post">
                    {% if post.href %}
                      <a href="{{ post.href }}">
                    {% endif %}
                      <div class="post-image">
                        <img src="{{ post.image }}" alt="{{ post.title }}">
                      </div>
                    {% if post.href %}
                      </a>
                    {% endif %}
                    <div class="post-info">
                      <h2 class="post-title">{{ post.title }}</h2>
                      <p>{{ post.published }}</p>
                      <div class="post-meta">
                        {% if post.tags %}
                          <div class="post-tags">
                            {% for tag in post.tags %}
                              <a href="{{ site.baseurl }}/tags/?tag={{ tag | cgi_escape }}" class="tag-button">{{ tag }}</a>
                            {% endfor %}
                          </div>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
          <!-- Add Arrows -->
        </div>

  </div>
</section>
<!-- end featured section -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var splide = new Splide('#custom-splide', {
      type   : 'loop',
      perPage: 3,  // Display three articles at once
      perMove: 1,  // Move one article per transition
      autoplay: true,
      interval: 3000,
      arrows: false,  // Disable arrows
      pagination: true,
      
    }).mount();
  });
</script>
{% endif %}
